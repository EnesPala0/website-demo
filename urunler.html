<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Şah Boya | Ürünler</title>

  <!-- Google Font -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">

  <!-- Custom CSS -->
  <link rel="stylesheet" href="style.css">
</head>
<body class="products-page">
    <nav class="navbar navbar-expand-lg">
  <div class="container">
    <a class="navbar-brand d-flex align-items-center" href="#">
      <a href="index.html"><img src="sahboya_logo.png" alt="Şah Boya" class="brand-logo"></a>
      
    </a>

    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#mainNav" aria-controls="mainNav" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="mainNav">
      <ul class="navbar-nav mx-auto align-items-lg-center">
        <li class="nav-item">
          <a class="nav-link active" aria-current="page" href="index.html">Ana Sayfa</a>
        </li>

        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="urunler.html" role="button" id="productsMenu" data-bs-toggle="dropdown" aria-expanded="false">
            Ürünler
          </a>
          <ul class="dropdown-menu" aria-labelledby="productsMenu">
             <li><a class="dropdown-item" href="urunler.html?category=all">Tüm Ürünler</a></li>
            <li><a class="dropdown-item" href="urunler.html?category=ic">İç Cephe</a></li>
            <li><a class="dropdown-item" href="urunler.html?category=dis">Dış Cephe</a></li>
            <li><a class="dropdown-item" href="urunler.html?category=astar">Astarlar</a></li>
            <li><a class="dropdown-item" href="urunler.html?category=izolasyon">İzolasyonlar</a></li>

          </ul>
        </li>

        <li class="nav-item">
          <a class="nav-link" href="#">Boya Hesapla</a>
        </li>

        <li class="nav-item">
          <a class="nav-link" href="hakkinda.html">Hakkımızda</a>
        </li>

        <li class="nav-item">
          <a class="nav-link" href="iletisim.html">İletişim</a>
        </li>
      </ul>

      <div class="d-flex align-items-center">
        <a class="btn btn-gradient me-2" href="iletisim.html">Teklif Al</a>
        <a class="btn btn-outline-secondary" href="iletisim.html">Mağaza Bul</a>
      </div>
    </div>
  </div>
</nav>

    <section class="products-page py-5">
  <div class="container">
    <div class="row">
      
      <!-- Sol Sidebar -->
      <aside class="col-lg-3 mb-4">
        <div class="list-group">
          <a href="urunler.html?category=all" class="list-group-item list-group-item-action active" data-category="all">Tüm Ürünler</a>
          <a href="urunler.html?category=ic" class="list-group-item list-group-item-action" data-category="ic">İç Cephe</a>
          <a href="urunler.html?category=dis" class="list-group-item list-group-item-action" data-category="dis">Dış Cephe</a>
          <a href="urunler.html?category=astar" class="list-group-item list-group-item-action" data-category="astar">Astarlar</a>
          <a href="urunler.html?category=izolasyon" class="list-group-item list-group-item-action" data-category="izolasyon">İzolasyonlar</a>
        </div>
      </aside>

      <!-- Ürünler -->
      <div class="col-lg-9">
        <div class="row g-4" id="productsContainer">
          <!-- Diğer kategorilere göre kartlar eklenir -->
        </div>
      </div>

    </div>
  </div>
</section>

    <footer class="site-footer py-5">
  <div class="container">
    <div class="row g-4">
      
      <!-- Logo + Hakkımızda -->
      <div class="col-12 col-md-4 text-center text-md-start">
        <a href="index.html" class="d-flex align-items-center mb-3 footer-logo">
          <img src="sahboya_logo.png" alt="Şah Boya" class="logo-img me-2" style="width: 100px; text-align: center;">
          <span class="fw-bold">Şah Boya</span>
        </a>
        <p class="text-muted">Şah Boya, yüksek kalite ve uygun fiyatlı boyalarıyla mekanlarınızı renklendirir.</p>
      </div>

      <!-- Hızlı Linkler -->
      <div class="col-12 col-md-4 text-center text-md-start">
        <h5 class="footer-title mb-3">Hızlı Linkler</h5>
        <ul class="list-unstyled footer-links">
          <li><a href="#">Ana Sayfa</a></li>
          <li><a href="#">Ürünler</a></li>
          <li><a href="#">Boya Hesapla</a></li>
          <li><a href="hakkinda.html">Hakkımızda</a></li>
          <li><a href="iletisim.html">Mağaza Bul / Teklif Al</a></li>
        </ul>
      </div>

      <!-- İletişim + Sosyal -->
      <div class="col-12 col-md-4 text-center text-md-start">
        <h5 class="footer-title mb-3">İletişim</h5>
        <p class="text-muted mb-1">Tel: 0537 607 7199</p>
        <p class="text-muted mb-3">Email: info@sahboya.net</p>
        <div class="social-icons d-flex justify-content-center justify-content-md-start gap-3">
          <a href="#"><img src="ikon_instagram.png" alt="Instagram" class="social-icon"></a>
          <a href="#"><img src="ikon_facebook.png" alt="Facebook" class="social-icon"></a>
          <a href="#"><img src="ikon_linkedin.png" alt="LinkedIn" class="social-icon"></a>
        </div>
      </div>

    </div>

    <!-- Alt Not -->
    <div class="text-center mt-4 text-muted small">
      <p>© 2025 Şah Boya. Tüm Hakları Saklıdır.</p>
    </div>
  </div>
</footer>


<!-- Bootstrap JS (Popper + Bootstrap) -->
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.min.js" integrity="sha384-G/EV+4j2dNv+tEPo3++6LCgdCROaejBqfUeNjuKAiuXbjrxilcCdDz6ZAVfHWe1Y" crossorigin="anonymous"></script>

<!-- Custom JS -->
<script src="script.js"></script>

<script type="module">
import { createClient } from 'https://esm.sh/@supabase/supabase-js@2';


const SUPABASE_URL = 'https://dpamfspimthzevqmnspe.supabase.co';
const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRwYW1mc3BpbXRoemV2cW1uc3BlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTcwNjg4NTUsImV4cCI6MjA3MjY0NDg1NX0.i6710Ugj_g6KjKxoukeuLXm4TWmUaijRaTRB-BbbqYQ';
const supabase = createClient(SUPABASE_URL, SUPABASE_ANON_KEY);


const productsEl = document.getElementById('productsContainer');


// Query param'dan kategori oku (all/ic/dis/astar/izolasyon)
const params = new URLSearchParams(window.location.search);
const currentCat = params.get('category') || 'all';


// Sidebar aktif class
document.querySelectorAll('.list-group a[data-category]')
.forEach(a => {
const c = a.getAttribute('data-category');
a.classList.toggle('active', c === currentCat || (currentCat === 'all' && c === 'all'));
});


function productCard(p) {
const imgUrl = p.image_path
? supabase.storage.from('product-images').getPublicUrl(p.image_path).data.publicUrl
: 'placeholder.jpg';


return `
<div class="col-md-6 col-lg-4 product-card" data-category="${p.category}">
<div class="card h-100">
<img src="${imgUrl}" class="card-img-top" alt="${p.name}">
<div class="card-body d-flex flex-column">
<h5 class="card-title">${p.name}</h5>
<p class="card-text">${(p.description || '').slice(0, 120)}${(p.description || '').length > 120 ? '…' : ''}</p>
<a href="urun.html?slug=${encodeURIComponent(p.slug)}" class="btn btn-gradient mt-auto">Detay</a>
</div>
</div>
</div>`;
}


async function loadProducts() {
let q = supabase
.from('products')
.select('id,name,slug,category,image_path,description,order_index')
.order('order_index', { ascending: true })
.order('name', { ascending: true });


if (currentCat && currentCat !== 'all') q = q.eq('category', currentCat);


const { data, error } = await q;
if (error) {
console.error(error);
productsEl.innerHTML = `<div class="alert alert-danger">Ürünler yüklenemedi.</div>`;
return;
}


if (!data || data.length === 0) {
productsEl.innerHTML = `<div class="alert alert-warning">Bu kategoride ürün yok.</div>`;
return;
}


productsEl.innerHTML = data.map(productCard).join('');
}


loadProducts();
</script>

</body>
</html>
